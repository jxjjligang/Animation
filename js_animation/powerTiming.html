<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="powerTiming.css">
    <script src="https://js.cx/libs/animate.js"></script>
</head>

<body>

    <h3>Linear timing animation</h3>
    <div class="path" id="lnPathDiv">
        <div class="brick" id="lnBrickDiv"></div>
    </div>

    <h3>Power timing animation</h3>
    <div class="path" id="powPathDiv">
        <div class="brick" id="powBrickDiv"></div>
    </div>
    <br/>
    <h3 display="inlineblock">Timing of N animation</h3>Input N value
    <input type="input" value="3" id="nInput" />
    <div class="path" id="cbcPathDiv">
        <div class="brick" id="cbcBrickDiv"></div>
    </div>
    <br/>
    <h3>The Match arcos timing animation</h3>
    <div class="path" id="arcosPathDiv">
        <div class="brick" id="arcosBrickDiv"></div>
    </div>
    <br/>
    <h3>Backbow shooting timing animation</h3>
    <div class="path" id="bbsPathDiv">
        <div class="brick" id="bbsBrickDiv"></div>
    </div>
    <br/>
    <input type="button" value="Click to compare" onclick="run2Animation()" />

    <script>
        function run2Animation() {
            let durationInSeconds = 10;
            let drawFunction = function (divId) {
                return function (progress) {
                    let div = document.getElementById(divId);
                    div.style.left = progress * 500 + 'px';
                };
            }
            let template = {
                duration: 1000 * durationInSeconds,
            };

            let divToFunc = new Map([
                ['lnBrickDiv', linear],
                ['powBrickDiv', power],
                ['cbcBrickDiv', powerOfN(parseFloat(nInput.value))],
                ['arcosBrickDiv', arcos],
                ['bbsBrickDiv', backBowShoot(1.5)],
            ]
            );

            divToFunc.forEach((value, key) => {
                template['timing'] = value;
                template['draw'] = drawFunction(key);
                animate(template);
            });
        };

        function linear(timeFraction) {
            return timeFraction;
        }

        function power(timeFraction) {
            return Math.pow(timeFraction, 2);
        }
        function powerOfN(n) {
            return function (timeFraction) {
                return Math.pow(timeFraction, n);
            }
        }

        function arcos(timeFraction) {
            return 1 - Math.sin(Math.acos(timeFraction));
        }

        function backBowShoot(elastic) {
            return function (timeFraction) {
                return Math.pow(timeFraction, 2) * ((elastic + 1) * timeFraction - elastic);
            }
        }
    </script>


</body>

</html>